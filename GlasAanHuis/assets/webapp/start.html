<!DOCTYPE html>
<html>
    <head>  
        <script type="text/javascript" charset="UTF-8" src="js/jsLoad.js"></script>
        <link rel="stylesheet" href="css/idangerous.swiper.css">
        <link rel="stylesheet" type="text/css" href="custom.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery-ui-1.10.4.custom.css" />
         <link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.1/mapbox.css' rel='stylesheet' />
         
        <script>	

			// Create profile page
			$eProfile = $("<div></div>");
			$eProfile.css("height", "100%");
			$eProfile.css("width", "100%");
			LoadHtmlPage("pages/profile.html", $eProfile);

			// Create settings page
			$eSettings = $("<div></div>");
			$eSettings.css("height", "100%");
			$eSettings.css("width", "100%");
			LoadHtmlPage("pages/settings.html", $eSettings);
		
			// Create postcode page
			$ePostcode = $("<div></div>");
			$ePostcode.css("height", "100%");
			$ePostcode.css("width", "100%");
			LoadHtmlPage("pages/postcode.html", $ePostcode);
		
			// create login page
			$eLogin = $("<div></div>");
			$eLogin.css("height", "100%");
			$eLogin.css("width", "100%");
			LoadHtmlPage("pages/register.html", $eLogin);

            // create buddy page
            $ebuddy = $("<div></div>");
            $ebuddy.css("height", "100%");
            $ebuddy.css("width", "100%");
            LoadHtmlPage("pages/buddy.html", $ebuddy);
            
            // create chat page
            $echat = $("<div></div>");
            $echat.css("height", "100%");
            $echat.css("width", "100%");
            LoadHtmlPage("pages/chat.html", $echat);

		    // create UploadPicture page
		    $eUploadPicture = $("<div></div>");
		    $eUploadPicture.css("height", "100%");
		    $eUploadPicture.css("width", "100%");
		    LoadHtmlPage("pages/UploadPicture.html", $eUploadPicture);

		    // create UploadVideo page
		    $eUploadVideo = $("<div></div>");
		    $eUploadVideo.css("height", "100%");
		    $eUploadVideo.css("width", "100%");
		    LoadHtmlPage("pages/UploadVideo.html", $eUploadVideo);
		
			// create intro page
			$eIntro = $("<div></div>");				
			$eIntro.css("backgroundColor", "black");
			$eIntro.css("height", "100%");
			$eIntro.css("width", "100%");				
			LoadHtmlPage("pages/intro_video.html", $eIntro);
			
			// create FAQ page
			$faq = $("<div></div>");
			$faq.css("height", "100%");
			$faq.css("width", "100%");				
			LoadHtmlPage("pages/faq.html", $faq);			
			
			// create forum page
			$forum = $("<div></div>");
			$forum.css("height", "100%");
			$forum.css("width", "100%");				
			LoadHtmlPage("pages/forum.html", $forum);
			
			// create Provider page
			$eProvider = $("<div></div>");
			$eProvider.css("height", "100%");
			$eProvider.css("width", "100%");				
			LoadHtmlPage("pages/provider.html", $eProvider);
			
			// create Pay page
			$ePay = $("<div></div>");
			$ePay.css("height", "100%");
			$ePay.css("width", "100%");				
			LoadHtmlPage("pages/Pay.html", $ePay);
			
            // create fullmap page
            $emap = $('<div></div>');             
            $emap.css("backgroundColor", "black");
            $emap.css("height", "100%");
            $emap.css("width", "100%");
            LoadHtmlPage("pages/map.html", $emap);
			
			// Hide the intro video
            $(document).on( "click", "#skip_intro", function() {
                $('#intro')[0].pause();
                $("#overlay_container").hide();
            });
			
			$(document).on( "click", ".closebutton", function() {
                $("#overlay_container").hide();
            });			
			
			$isMenuOpen = false;
			$menuIsAnimating = false;
			
			function MenuOpen()
			{
				$menuIsAnimating = true;
				$("#top-menu").css("textAlign", "right");
					
				$width = $( window ).width()-50;
				$( "#left-menu" ).animate({
						width: $width,	
						}, 150, function() {
							$menuIsAnimating = false;
						});		
				/*
				$( ".swiper-container, #overlay_container" ).animate({
						width: 50,
						marginLeft: $width,
						}, 150, function() {
							$menuIsAnimating = false;
						});	*/						
			}
			
			function MenuClose()
			{	
				$menuIsAnimating = true;
				$("#top-menu").css("textAlign", "left");
			
				$( "#left-menu" ).animate({
						width: 0,					
						}, 150, function() {
								$menuIsAnimating = false;
						});	
				/*
				$( ".swiper-container" ).animate({
						width: $( window ).width()-20,
						marginLeft: 20,
						}, 150, function() {
							$menuIsAnimating = false;
						});	

				$( "#overlay_container" ).animate({
						width: $( window ).width(),
						marginLeft: 0,
						}, 150, function() {
							$menuIsAnimating = false;
						});	*/						
			}
			
			// Menu
			$(document).on( "click touchstart", "#menu-btn-open", function() {
				if(!$menuIsAnimating)
				{
					$("#menu-btn-close").show();
					MenuOpen();
				}
				return false;				
            });	
			
			$(document).on( "click touchstart", "#left-menu ul li", function() {
				if(!$menuIsAnimating)
				{
					$("#menu-btn-close").hide();
					MenuClose();
				}
				return false;				
            });	
			
			
			$(document).on( "click touchstart", "#menu-btn-close", function() {
				
				if(!$menuIsAnimating)
				{	
					$("#menu-btn-close").hide();
					MenuClose();
				}
				return false;				
            });	
			
						
			// --
			var jsonDistricts = null;
	        var mySwiper;
            $( document ).ready(function() {
				
				$.get("http://glas.mycel.nl/districts?lat=51.983333&long=5.916667",function(data, status)
				{
				jsonDistricts = data;			
				
				$("#menu-btn-close").hide();				
					
				$(document).on( "click", "#mijnWijk", function() 
				{	
					$("#bg").css("opacity","0"); 
					// Go to login overlay
         			//$("#overlay_container").html($eLogin);							
					//$("#overlay_container").show();
					
					switch($status)
					{
						case 1:
		          			$("#overlay_container").html($eLogin);	
							break;
						case 2:
		          			$("#overlay_container").html($eLogin);	
							break;
						case 3:
		          			$("#overlay_container").html($eProvider);
							break;
						case 4:
		          			$("#overlay_container").html($ePay);	
							break;			
					}
					$("#overlay_container").show();
        		});

				$(document).on( "click", "#andereWijk", function() {	
					$("#bg").css("opacity","0");
                
	        // Go to postcode zoek overlay
          $("#overlay_container").html($ePostcode);							
			    $("#overlay_container").show();
        });
        $(document).on( "click", "#naarchat", function() {    
                    $("#bg").css("opacity","0");
                
            // Go to  chat overlay
          $("#overlay_container").html($echat);                         
                $("#overlay_container").show();
        });
        /*
        $(document).on( "click", "#userImages", function() {    
                    $("#bg").css("opacity","0");
                
            // Go to chat overlay
          $("#overlay_container").html($ebuddy);                         
                $("#overlay_container").show();
        });*/

		
		
		$(document).on( "click", "#settings_view", function() {  
          $("#bg").css("opacity","0");
          $("#overlay_container").html($eProfile);             
          $("#overlay_container").show();
        });
        
        $(document).on("click", "#faq", function() {  
          $("#bg").css("opacity","0");
          $("#overlay_container").html($faq);             
          $("#overlay_container").show();
        	
        });
        
        $(document).on("click", "#forum", function() {  
          $("#bg").css("opacity","0");
          $("#overlay_container").html($forum);             
          $("#overlay_container").show();
        	
        });
		
		
        $(document).on( "click", "#uploadPicture", function() {  
          $("#bg").css("opacity","0");
          $("#overlay_container").html($eUploadPicture);             
          $("#overlay_container").show();
        });
        
        $(document).on("click","div#naarMap",function(){
          $("#bg").css("opacity","0");
          $("#overlay_container").html($emap);             
          $("#overlay_container").show();
            });
				
				// Prepare the containers
				$height = $( window ).height();
				$width = $( window ).width();
				$(".swiper-container").css("height", $height + "px");

				$("#overlay_container").css("height",$height - 30);
				$("#overlay_container").css("width", "100%");
				$("#overlay_container").hide();
				// --

				// Append and show the intro video
				$("#overlay_container").append($eIntro);							
				$("#overlay_container").show();	
				
				$(".swiper-container").css("height", $height + "px");
                
				
				$currentSlides = 2;
				$currentIndex = 1;
				
				
                mySwiper  = new Swiper('.swiper-container',{
                    //Your options here:
                    mode:'horizontal',
                    noSwiping: true,
                    loop: false,
					
					// Slide next event
					onSlideNext: function() {
						$currentIndex++;	
						//alert($currentIndex +" "+  $currentSlides);
						if($currentIndex == $currentSlides && $currentSlides < jsonDistricts.length)
						{
							
							$.get("http://glas.mycel.nl/district?id=" + jsonDistricts[$currentSlides].id + "",function(data, status)
							{							
								// Maak een clone van de eerste slide
								var newSlide = mySwiper.getSlide(0).clone();	
								
								$slide = $(newSlide);
								
								//alert($slide);
								
								//alert(jsonDistricts[$currentSlides].id);
								
								
								
								getDistrictInfo(data, $slide);
								mySwiper.appendSlide(newSlide);
						
								$currentSlides++;
							});
						}	

						$("body").css('background-image', "url('"+ jsonDistricts[$currentIndex-1].plaatje +"')");
						
					},
					
					onSlidePrev:  function() {
						$currentIndex --;
												
						$("body").css('background-image', "url('"+ jsonDistricts[$currentIndex-1].plaatje +"')");
					}
										
                });
							
                $('#bg').blurjs({
                    source: 'body',
                    radius: 35,
                    overlay: 'rgba(0, 0, 0, .2)'
                });
                
                //standaard blur uitzetten
                 $("#bg").css("opacity","0");

                 //$("#first").on("scroll",".blur",function(){
				 $(".blur").scroll(function(e) {
				    // console.log("scrollen");
                 var elem = $(".blur");
                 var maxScrollTop = elem[0].scrollHeight - elem.outerHeight();
                 var vaagheid = 6/maxScrollTop;
                 var blurHoeveelheid =$(".blur").scrollTop()*vaagheid;
            
           
                 //grootte window
                 //console.log("blur per pixel: "+vaagheid);
                // console.log("scrolltop waarde "+$(".blur").scrollTop());
                 //console.log("opacityval: "+blurHoeveelheid);
                 $("#bg").css("opacity",blurHoeveelheid);
                 
                });
				
				
				
				//
				
				$.get("http://glas.mycel.nl/district?id=1",function(data, status)
				{
					$.get("http://glas.mycel.nl/district?id=2",function(data2, status2)
					{
						getDistrictInfo(data, $("#first"), true);
						getDistrictInfo(data, $("#second"));						
					});	
				});				
				

			});
				
				getDistrictInfo(1, $("#first"), true);			
				getDistrictInfo(2, $("#second"));
								
				getDistrictInfo(1, $("#first"), true);			
				getDistrictInfo(2, $("#second"));
								
			});
        </script>
    </head>
    <body onLoad="initFastButtons();">
  	<span id="fastclick">
	
	
    <!--<figure class="vague"></figure>-->
    <div id="bg"></div>
	<div id="top-menu">
		<div style="float:left;" id="menu-btn-open"><img src="img/reveal-icon.png" /></div>
		<div style="float:right;" id="menu-btn-close"><img src="img/reveal-icon.png" /></div>
	</div>
	<div id="left-menu">
	<ul>
		<li id="settings_view">Settings</li>
		<li>Mijn wijk</li>
	</ul>
	</div>
    <div class="swiper-container">
              <div class="swiper-wrapper">

                  <!--First Slide-->
                <div class="swiper-slide blur" id="first" >content</div>                    				
				                              
                <!--5th Slide-->
                <div class="swiper-slide blur" id="second">content</div>
            
               
                <!--6th Slide
                <div class="swiper-slide noSwiping overlayparent" id="provider">content</div>-->
               
               
               </div><!-- end swiper container-->
               
        </div>
		<div id="overlay_container"> 
		
		</div>
		</span>
    </body>
</html>